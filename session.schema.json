{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "ChatSession",
  "type": "object",
  "additionalProperties": false,
  "properties": {
    "session_id": {
      "type": "string",
      "pattern": "^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-5][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}$"
    },
    "user_id": {
      "type": "string",
      "maxLength": 256
    },
    "started_at": {
      "type": "string",
      "pattern": "^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"
    },
    "ended_at": {
      "type": ["string", "null"],
      "pattern": "^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"
    },
    "channel": {
      "type": "string",
      "enum": ["web", "mobile", "api", "slack", "teams"]
    },
    "messages": {
      "type": "array",
      "minItems": 1,
      "items": {
        "$ref": "chat_message.schema.json"
      }
    },
    "metadata": {
      "type": "object",
      "additionalProperties": true
    }
  },
  "required": ["session_id", "started_at", "messages"]
}
